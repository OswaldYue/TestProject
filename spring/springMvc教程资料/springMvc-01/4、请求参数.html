<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3267"/>
<h1>4、请求参数</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/6/19 16:17</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/6/19 17:16</i></td></tr>
<tr><td><b>作者：</b></td><td><i>雷丰阳</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div>入参处理：</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>package com.atguigu.controller;</div><div><br/></div><div>import java.io.BufferedReader;</div><div>import java.io.IOException;</div><div>import java.io.PrintWriter;</div><div><br/></div><div>import javax.servlet.ServletInputStream;</div><div>import javax.servlet.ServletOutputStream;</div><div>import javax.servlet.http.HttpServletRequest;</div><div>import javax.servlet.http.HttpServletResponse;</div><div>import javax.servlet.http.HttpSession;</div><div><br/></div><div>import org.springframework.stereotype.Controller;</div><div>import org.springframework.web.bind.annotation.CookieValue;</div><div>import org.springframework.web.bind.annotation.RequestHeader;</div><div>import org.springframework.web.bind.annotation.RequestMapping;</div><div>import org.springframework.web.bind.annotation.RequestParam;</div><div><br/></div><div>import com.atguigu.book.Book;</div><div><br/></div><div>@Controller</div><div>public class HelloController {</div><div><br/></div><div>    /**</div><div>     * request.getParameter(&quot;&quot;).....</div><div>     *</div><div>     * @return</div><div>     */</div><div>    @RequestMapping(&quot;/hello&quot;)</div><div>    public String handle01() {</div><div>        System.out.println(&quot;handle01...&quot;);</div><div>        return &quot;success&quot;;</div><div>    }</div><div><br/></div><div>    /**</div><div>     * SpringMVC如何获取请求带来的各种信息 默认方式获取请求参数： 直接给方法入参上写一个和请求参数名相同的变量。这个变量就来接收请求参数的值；</div><div>     * 带：有值，没带：null；</div><div>     *</div><div>     * @RequestParam：获取请求参数的；参数默认是必须带的；</div><div>     * @RequestParam(&quot;user&quot;)String username username =</div><div>     *                             request.getParameter(&quot;user&quot;)</div><div>     *</div><div>     *</div><div>     * @RequestParam(&quot;user&quot;)</div><div>     * @PathVariable(&quot;user&quot;)</div><div>     *                       /book/【{user}pathvariable】?【user=admin(requestparam)</div><div>     *                       】</div><div>     *</div><div>     *                       value:指定要获取的参数的key required:这个参数是否必须的</div><div>     *                       defaultValue:默认值。没带默认是null；</div><div>     *</div><div>     *</div><div>     * @RequestHeader：获取请求头中某个key的值； request.getHeader(&quot;User-Agent&quot;)；</div><div>     * @RequestHeader(&quot;User-Agent&quot;)String userAgent userAgent =</div><div>     *                                    request.getHeader(&quot;User-Agent&quot;)</div><div>     *                                    如果请求头中没有这个值就会报错； value() required()</div><div>     *                                    defaultValue()</div><div>     *</div><div>     * @CookieValue：获取某个cookie的值； 以前的操作获取某个cookie； Cookie[] cookies =</div><div>     *                            request.getCookies(); for(Cookie c:cookies){</div><div>     *                            if(c.getName().equals(&quot;JSESSIONID&quot;)){ String</div><div>     *                            cv = c.getValue(); } }</div><div>     * value()</div><div>     * required()</div><div>     * defaultValue()</div><div>     */</div><div>    @RequestMapping(&quot;/handle01&quot;)</div><div>    public String handle02(</div><div>            @RequestParam(value = &quot;user&quot;, required = false, defaultValue = &quot;你没带&quot;) String username,</div><div>            @RequestHeader(value = &quot;AHAHA&quot;, required = false, defaultValue = &quot;她也没带&quot;) String userAgent,</div><div>            @CookieValue(value=&quot;JSESSIONID&quot;,required=false)String jid) {</div><div>        System.out.println(&quot;这个变量的值：&quot; + username);</div><div>        System.out.println(&quot;请求头中浏览器的信息：&quot; + userAgent);</div><div>        System.out.println(&quot;cookie中的jid的值&quot;+jid);</div><div>        return &quot;success&quot;;</div><div>    }</div><div><br/></div><div>    /**</div><div>     * 如果我们的请求参数是一个POJO；</div><div>     * SpringMVC会自动的为这个POJO进行赋值？</div><div>     * 1）、将POJO中的每一个属性，从request参数中尝试获取出来，并封装即可；</div><div>     * 2）、还可以级联封装；属性的属性</div><div>     * 3）、请求参数的参数名和对象中的属性名一一对应就行</div><div>     *</div><div>     *</div><div>     * 提交的数据可能有乱码：</div><div>     * 请求乱码：</div><div>     *         GET请求：改server.xml；在8080端口处URIEncoding=&quot;UTF-8&quot;</div><div>     *         POST请求：</div><div>     *             在第一次获取请求参数之前设置</div><div>     *             request.setCharacterEncoding(&quot;UTF-8&quot;);</div><div>     *             自己写一个filter；SpringMVC有这个filter</div><div>     *</div><div>     * 响应乱码：</div><div>     *         response.setContentType(&quot;text/html;charset=utf-8&quot;)</div><div>     * @param book</div><div>     * @return</div><div>     */</div><div>    @RequestMapping(&quot;/book&quot;)</div><div>    public String addBook(Book book){</div><div>        System.out.println(&quot;我要保存的图书：&quot;+book);</div><div>        return &quot;success&quot;;</div><div>    }</div><div><br/></div><div>    /**</div><div>     * SpringMVC可以直接在参数上写原生API;</div><div>     *</div><div>     * HttpServletRequest</div><div>     * HttpServletResponse</div><div>     * HttpSession</div><div>     *</div><div>     *</div><div>     * java.security.Principal</div><div>     * Locale：国际化有关的区域信息对象</div><div>     * InputStream：</div><div>     *         ServletInputStream inputStream = request.getInputStream();</div><div>     * OutputStream：</div><div>     *         ServletOutputStream outputStream = response.getOutputStream();</div><div>     * Reader：</div><div>     *         BufferedReader reader = request.getReader();</div><div>     * Writer：</div><div>     *         PrintWriter writer = response.getWriter();</div><div>     *</div><div>     * @throws IOException</div><div><br/></div><div>     *</div><div>     *</div><div>     */</div><div>    @RequestMapping(&quot;/handle03&quot;)</div><div>    public String handle03(HttpSession session,</div><div>            HttpServletRequest request,HttpServletResponse response) throws IOException {</div><div>        request.setAttribute(&quot;reqParam&quot;, &quot;我是请求域中的&quot;);</div><div>        session.setAttribute(&quot;sessionParam&quot;, &quot;额我是Session域中的&quot;);</div><div><br/></div><div>        return &quot;success&quot;;</div><div>    }</div><div><br/></div><div>}</div></div><div><br/></div><div><br/></div></span>
</div></body></html> 